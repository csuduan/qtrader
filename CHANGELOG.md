# 项目更新日志

## [v0.1.0] - 2026-01-19

### 新增功能
- 完整的 Vue 3 + TypeScript 前端管理界面
- 换仓管理功能（创建、编辑、执行换仓指令）
- 告警管理功能
- 定时任务管理功能
- 系统参数管理 API
- 行情订阅和管理功能

### 优化改进
- **WebSocket 推送优化**：
  - 账户信息推送频率从实时改为每 3 秒一次
  - 使用缓存机制减少不必要的推送
  - 动态启停推送任务，无连接时自动停止
  - 减少约 90% 的账户信息相关 WebSocket 消息

- **前端优化**：
  - 移除 `totalFloatProfit` 计算属性，直接使用账户字段
  - 减少前端计算开销
  - 优化界面显示，避免频繁刷新

- **后端优化**：
  - 优化持仓更新触发条件，只监听关键字段变化
  - 修复账户 ID 和订单时间显示问题
  - 改进 CSV 文件扫描逻辑，支持按账户过滤

### Bug 修复
- 修复账户 ID 显示为 "-" 的问题
- 修复订单成交时间显示错误（显示为当前时间而非成交时间）
- 修复换仓文件扫描时读取到其他账户文件的问题
- 修复 WebSocket 断开连接时的异步调用问题

### 文档更新
- 更新 README.md，补充完整的项目说明
- 更新 AGENTS.md，添加 WebSocket 推送规范
- 更新 web/README.md，完善前端文档
- 新增 docs/WEBSOCKET_OPTIMIZATION.md，详细说明 WebSocket 优化
- 完善 docs/INIT_SYSTEM.md 和 docs/INIT_SYSTEM_UPDATE.md

---

## [v0.0.1] - 2026-01-18

### 新增功能
- 系统初始化脚本（init_sys.py）
- 系统参数管理功能（风控参数可运行时修改）
- 数据库参数持久化
- 系统参数 API

### 优化改进
- 从数据库加载风控参数和定时任务
- 支持通过 API 运行时修改风控参数
- 改进参数加载器，支持类型转换和默认值

---

## 初始版本 - 2026-01-10

### 核心功能
- 交易引擎核心（基于 TqSdk）
- 配置文件管理
- 风控模块
- 订单文件扫描器
- RESTful API（账户、持仓、成交、委托单）
- WebSocket 实时推送
- 数据持久化（SQLite）
- 定时任务调度
- 基础的前端框架搭建
